<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Fetch Random TODOS</title>
  </head>
  <body>
    <pre></pre>
    <script>
      function log(obj) {
        document.querySelector('pre').textContent = JSON.stringify(
          obj,
          null,
          2,
        );
      }

      function randomTodos() {
        const todos = [];
        return fetch(
          `https://baconipsum.com/api/?type=ameat-and-filler&sentences=${Math.floor(
            Math.random() * 4 + 3,
          )}`,
        )
          .then(response => response.json())
          .then(data => {
            data[0].split('.').forEach(title => {
              const checked = !!Math.round(Math.random() * 0.9);
              title && todos.push({ title, checked });
            });
            return todos;
          });
      }

      const todos = randomTodos();

      todos.then(data => log(data)).catch(console.error);
    </script>
  </body>
</html>
